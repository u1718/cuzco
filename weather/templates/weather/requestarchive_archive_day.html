{% extends 'base.html' %}

{% block content %}
<div class="row">
  <div class="col-md-10">
    {% if page_obj %}
    <table class="table table-striped">
      {% comment %}
      <thead>
        <tr>
          <th>Req Date</th>
          <th>Req Info</th>
          <th>Name</th>
          <th>Data Source</th>
        </tr>
      </thead>
      {% endcomment %}
      <tbody>
	{% for ds in object_list %}
	<tr>
	  {% if ds.tn == 'owm' %}
	  <td><a href="{% url 'weather:owm_view' ds.id %}">{{ ds.req_date }}</a></td>
	  {% elif ds.tn == 'yahoo' %}
	  <td><a href="{% url 'weather:yahoo_view' ds.id %}">{{ ds.req_date }}</a></td>
	  {% endif %}
	  <td>{{ ds.cod }}, {{ ds.message }}, {{ ds.cnt }}</td>
	  <td>{{ ds.name }}</td>
	  <td>{{ ds.tn }}</td>
	</tr>
	{% endfor %}
      </tbody>
    </table>
    {% else %}
    <p>No reqs are available.</p>
    {% endif %}
  </div>
  <div class="col-md-2">
    {% autoescape off %}
    {{ calendar }}
    {% endautoescape %}
  </div>
</div>
<p>
  {% if page_obj.has_previous %}
  <a href="?page=1">first</a>
  <a href="?page={{ page_obj.previous_page_number }}">previous</a>
  {% endif %}

  Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.

  {% if page_obj.has_next %}
  <a href="?page={{ page_obj.next_page_number }}">next</a>
  <a href="?page={{ page_obj.paginator.num_pages }}">last</a>
  {% endif %}
</p>
<p>
  {% if previous_day %}
  Previous Day: <a href="{% url 'weather:archive_day' previous_day.year previous_day.month previous_day.day %}">
    {{ previous_day }}</a>
  {% endif %}
  {% if previous_day and next_day %}--{% endif %}
  {% if next_day %}
  Next Day: <a href="{% url 'weather:archive_day' next_day.year next_day.month next_day.day %}">
    {{ next_day }}</a>
  {% endif %}
</p>

{% endblock %}

{% block footer %}
{{ request.user.username }}
{% endblock %}
