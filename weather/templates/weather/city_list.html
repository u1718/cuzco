{% extends 'base.html' %}

{% block content %}
{% if city_list %}
<ul>
  {% for c in city_list %}
  <li>
    <a href="{% url 'weather:city_view' c.city.id %}">{{ c.city.name }}</a>
      
    <div class="row">
      <div class="col-md-4">
	<h4><strong>
	  Weather in
	  {{ c.owm.name }}, {{ c.owm.country }}</strong>
	</h4>
	<h3><strong>
	  {{ c.forecasts.0.main.temp }} °C</strong>
	</h3>
	<h4>
	  {{ c.forecasts.0.weather.0.description }}
	</h4>
	<p>
	  get at {{ c.owm.req_date }}<br>
	  (Forecast for {{ c.forecasts.0.dt_txt }})
	</p>
      
	<table class="table table-striped table-bordered">
	  <tr>
	    <td>Wind</td><td>
	      {{ c.forecasts.0.wind.speed }} m/s<br>
	      {{ c.forecasts.0.wind.deg }}</td></tr>
	  <tr>
	    <td>Cloudiness</td><td>
	      {{ c.forecasts.0.clouds.all }} %</td></tr>
	  <tr>
	    <td>Pressure</td><td>
	      {{ c.forecasts.0.main.grnd_level }} hpa</td></tr>
	  <tr>
	    <td>Humidity</td><td>
	      {{ c.forecasts.0.main.humidity }} %</td></tr>
	  <tr>
	    <td>Sunrise</td><td>
	      {{ c.sunrise }}</td></tr>
	  <tr>
	    <td>Sunset</td><td>
	      {{ c.sunset }}</td></tr>
	  <tr>
	    <td>Geo coords</td><td>
	      [{{ c.owm.coord_lat }}, {{ c.owm.coord_lon }}]</td></tr>
	</table>
      </div>
      <div class="col-md-8">
	<ul class="nav nav-tabs">
	  <li class="active"><a data-toggle="tab" href="#temp{{ c.city.id }}">Temperature</a></li>
	  <li><a data-toggle="tab" href="#wind{{ c.city.id }}">Wind</a></li>
	  <li><a data-toggle="tab" href="#pres{{ c.city.id }}">Pressure</a></li>
	  <li><a data-toggle="tab" href="#humi{{ c.city.id }}">Humidity</a></li>
	  <li><a data-toggle="tab" href="#prec{{ c.city.id }}">Precipitation</a></li>
	</ul>

	<div class="tab-content">
	  <div id="temp{{ c.city.id }}" class="tab-pane fade in active">
	    <div class="bok">
	      {{ c.script.temp|safe }}
	      {{ c.div.temp|safe }}
	    </div>
	    {# <img src="{% url 'weather:gr' c.owm.id %}" alt="obed" style="width:100%"> #}
	  </div>
	  <div id="wind{{ c.city.id }}" class="tab-pane fade">
	    <div class="bok">
	      {{ c.script.wind|safe }}
	      {{ c.div.wind|safe }}
	    </div>
	  </div>
	  <div id="pres{{ c.city.id }}" class="tab-pane fade">
	    <div class="bok">
	      {{ c.script.pres|safe }}
	      {{ c.div.pres|safe }}
	    </div>
	  </div>
	  <div id="humi{{ c.city.id }}" class="tab-pane fade">
	    <div class="bok">
	      {{ c.script.humi|safe }}
	      {{ c.div.humi|safe }}
	    </div>
	  </div>
	  <div id="prec{{ c.city.id }}" class="tab-pane fade">
	    <div class="bok">
	      {{ c.script.prec|safe }}
	      {{ c.div.prec|safe }}
	    </div>
	  </div>
	</div>
	
	<table class="table table-striped table-bordered small">
	  <tr>
	    {% for f in c.forecasts %}
	    <td>
	      {{ f.dt|time:"H:i" }}<br>
	      {{ f.main.temp }} °C<br>
	      {{ f.wind.speed }} m/s<br>
	      {{ f.main.pressure }}
	    </td>
	    {% endfor %}
	  </tr>
	</table>
      </div>
    </div>
  </li>
  {% endfor %}
</ul>
{% else %}
<p>No cities are available.</p>
{% endif %}
{% endblock %}

{% block footer %}
{{ request.user.username }}
{% endblock %}
